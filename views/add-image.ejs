<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Add Image</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!-- font awesome css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- External CSS -->
    <link rel="stylesheet" href="../css/common.css" />
</head>

<body>

    <%- include("partials/navbar") %>

        <div class="container m-top">
            <!-- adddddddddddddddd -->
            <div class="row">
                <div class="col-sm-6">
                    <div class="card light-color" style="border: none">
                        <div class="card-body">
                            <img class="v-center" src="<%= user.picture %>" alt="profile-img"
                                style="box-shadow: 5px 10px 8px #888888; border-radius: 50%; width: 200px; height: 200px;"><br>
                            <div class="text-dark-color text-center">
                                <h1>Hi <%= user.name %>üëãüèª
                                </h1>
                                <h4>
                                    <%= user.email %>
                                </h4>
                            </div><br>
                            <a href="/logout"
                                class="btn btn-outline-light button dark-color col-sm-8 light-text-color v-center"
                                style="box-shadow: 5px 10px 8px #888888;">
                                <h4>Sign Out</h4>
                            </a><br>
                            <a href="/"
                                class="btn btn-outline-light button dark-color col-sm-8 light-text-color v-center"
                                style="box-shadow: 5px 10px 8px #888888;">
                                <h4>View Gallery</h4>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="card light-color" style="border: none">
                        <div class="card-body">
                            <div style="font-size: 1.5rem;"> Instructions</div>
                            <div style="font-size: 1.14rem;">
                                <ul class="text-start">
                                    <li>
                                        .jpeg, .jfif, .tif, .tiff, .webp, .jpg, .png, .raw are supported. If you
                                        want to
                                        add image
                                        with any other extension kindly drop a mail to <a
                                            href="mailto:prakriti.saroj@iitgn.ac.in">prakriti.saroj@iitgn.ac.in</a>
                                        along with
                                        required extension.
                                    </li>
                                    <li>
                                        Don't upload files above 2MB.
                                    </li>
                                    <li>
                                        After posting you can either delete or update caption!
                                    </li>
                                </ul>
                            </div>
                            <hr>
                            <div>
                                <form action="/add-image" method="POST" enctype="multipart/form-data">
                                    <label for="desc" class="form-label"></label>
                                    <textarea class="form-control" id="desc" name="desc" value="" rows="3"
                                        placeholder="Caption" required></textarea>
                                    <label for="image" class="form-label"></label>
                                    <input class="form-control" type="file" id="image" name="image" value="" required>
                                    <br>
                                    <button
                                        class="btn btn-light button dark-color btn-outline-light light-text-color v-center"
                                        type="submit" style="box-shadow: 5px 10px 8px #888888; width: 250px;">
                                        <h4>POST</h4>
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <!-- tilllllllllllllll -->


            <div class="col-sm-12">
                <h1 class="text-center">Your Posts</h1><br>

                <div>
                    <% items=items.reverse() %>
                        <% items.forEach(function(image) { %>
                            <!-- addded -->
                            <div class="row">
                                <div class="col-sm-2"></div>
                                <div class="col-sm-8 g-4">
                                    <div class="card">
                                        <div style="height: auto; width: auto;">
                                            <img class="v-center" alt="image" width="100%" height="auto" loading="lazy"
                                                src="data:image/<%=image.img.contentType%>;base64,
                                            <%=image.img.data.toString('base64')%>" />
                                        </div>
                                        <p
                                            style="padding-left: 5px; padding-top: 3px; padding-right: 5px; font-size: 1.15rem;">
                                            <%= image.content %>
                                        </p>
                                        <p class="text-end" style="margin-right: 10px;">
                                            <a class="btn btn-danger btn-xs" href="/delete/<%=image._id%>"><i
                                                    class="fa fa-2x fa-trash"></i></a>
                                        </p>
                                    </div>
                                </div>
                                <div class="col-sm-2"></div>
                            </div>
                            <!-- till here -->
                            <% }) %>
                                <br><br>
                </div>
            </div>

            <div class="large-large-text text-center text-dark-color">
                You Have Reached the End!
            </div>
        </div>
        <!-- <%- include("partials/footer") %> -->
        <!-- bootstrap -->
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
            integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
            integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
            crossorigin="anonymous"></script>
</body>

</html>